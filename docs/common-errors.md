# âš ï¸ C è¯­è¨€å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ

> æ”¶å½•æ–°æ‰‹åˆ°è¿›é˜¶å¼€å‘è€…å¸¸è§çš„ C è¯­è¨€é”™è¯¯ï¼Œé™„è¯¦ç»†è§£é‡Šå’Œä¿®å¤æ–¹æ³•

## ğŸ“‹ ç›®å½•
- [1. ç¼–è¯‘é”™è¯¯](#1-ç¼–è¯‘é”™è¯¯)
- [2. é“¾æ¥é”™è¯¯](#2-é“¾æ¥é”™è¯¯)
- [3. è¿è¡Œæ—¶é”™è¯¯](#3-è¿è¡Œæ—¶é”™è¯¯)
- [4. é€»è¾‘é”™è¯¯](#4-é€»è¾‘é”™è¯¯)
- [5. å†…å­˜ç›¸å…³é”™è¯¯](#5-å†…å­˜ç›¸å…³é”™è¯¯)
- [6. æŒ‡é’ˆç›¸å…³é”™è¯¯](#6-æŒ‡é’ˆç›¸å…³é”™è¯¯)
- [7. æ•°ç»„å’Œå­—ç¬¦ä¸²é”™è¯¯](#7-æ•°ç»„å’Œå­—ç¬¦ä¸²é”™è¯¯)
- [8. é¢„å¤„ç†å™¨é”™è¯¯](#8-é¢„å¤„ç†å™¨é”™è¯¯)
- [9. æœ€ä½³å®è·µå»ºè®®](#9-æœ€ä½³å®è·µå»ºè®®)

---

## 1. ç¼–è¯‘é”™è¯¯

### é”™è¯¯1ï¼šç¼ºå°‘åˆ†å·
```c
// âŒ é”™è¯¯ä»£ç 
#include <stdio.h>
int main() {
    printf("Hello")
    return 0
}
```

```c
// âœ… æ­£ç¡®ä»£ç 
#include <stdio.h>
int main() {
    printf("Hello");
    return 0;
}
```
**é”™è¯¯ä¿¡æ¯**ï¼š`error: expected ';' before 'return'`

**è§£å†³æ–¹æ¡ˆ**ï¼šCè¯­è¨€æ¯æ¡è¯­å¥å¿…é¡»ä»¥åˆ†å·ç»“æŸã€‚

### é”™è¯¯2ï¼šç¼ºå°‘å¤´æ–‡ä»¶
```c
// âŒ é”™è¯¯ä»£ç 
int main() {
    printf("Hello");
    return 0;
}
```

```c
// âœ… æ­£ç¡®ä»£ç 
#include <stdio.h>
int main() {
    printf("Hello");
    return 0;
}
```
**é”™è¯¯ä¿¡æ¯**ï¼š`warning: implicit declaration of function 'printf'`

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨æ ‡å‡†åº“å‡½æ•°å‰å¿…é¡»åŒ…å«ç›¸åº”çš„å¤´æ–‡ä»¶ã€‚

### é”™è¯¯3ï¼šç±»å‹ä¸åŒ¹é…
```c
// âŒ é”™è¯¯ä»£ç 
int main() {
    float f = 3.14;
    printf("%d", f);  // ç”¨%dæ‰“å°float
    return 0;
}
```

```c
// âœ… æ­£ç¡®ä»£ç 
int main() {
    float f = 3.14;
    printf("%f", f);  // ä½¿ç”¨%f
    return 0;
}
```
**é”™è¯¯ä¿¡æ¯**ï¼šå¯èƒ½æ²¡æœ‰é”™è¯¯ä¿¡æ¯ï¼Œä½†è¾“å‡ºé”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿æ ¼å¼è¯´æ˜ç¬¦ä¸å˜é‡ç±»å‹åŒ¹é…ã€‚

### é”™è¯¯4ï¼šå˜é‡æœªå£°æ˜
```c
// âŒ é”™è¯¯ä»£ç 
int main() {
    x = 10;  // xæœªå£°æ˜
    return 0;
}
```

```c
// âœ… æ­£ç¡®ä»£ç 
int main() {
    int x;    // å…ˆå£°æ˜
    x = 10;   // å†ä½¿ç”¨
    return 0;
}
```
**é”™è¯¯ä¿¡æ¯**ï¼š`error: 'x' undeclared`

**è§£å†³æ–¹æ¡ˆ**ï¼šæ‰€æœ‰å˜é‡å¿…é¡»å…ˆå£°æ˜åä½¿ç”¨ã€‚

### é”™è¯¯5ï¼šé‡å¤å®šä¹‰
```c
// âŒ é”™è¯¯ä»£ç 
int x = 10;
int x = 20;  // é‡å¤å®šä¹‰
```

```c
// âœ… æ­£ç¡®ä»£ç 
int x = 10;
x = 20;  // é‡æ–°èµ‹å€¼ï¼Œä¸æ˜¯é‡æ–°å®šä¹‰
```
**é”™è¯¯ä¿¡æ¯**ï¼š`error: redefinition of 'x'`

**è§£å†³æ–¹æ¡ˆ**ï¼šä¸€ä¸ªä½œç”¨åŸŸå†…å˜é‡åªèƒ½å®šä¹‰ä¸€æ¬¡ã€‚

---

## 2. é“¾æ¥é”™è¯¯

### é”™è¯¯1ï¼šæœªå®šä¹‰å¼•ç”¨
```c
// âŒ é”™è¯¯ä»£ç 
// main.c
int main() {
    extern void my_function();
    my_function();  // å‡½æ•°å£°æ˜ä½†æœªå®šä¹‰
    return 0;
}
```

```c
// âœ… æ­£ç¡®ä»£ç 
// myfunc.c
void my_function() {
    printf("Hello from my_function\n");
}

// main.c
int main() {
    extern void my_function();
    my_function();
    return 0;
}

// ç¼–è¯‘å‘½ä»¤
gcc main.c myfunc.c -o program
```
**é”™è¯¯ä¿¡æ¯**ï¼š`undefined reference to 'my_function'`

**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿æ‰€æœ‰å¼•ç”¨çš„å‡½æ•°éƒ½æœ‰å®šä¹‰ã€‚

### é”™è¯¯2ï¼šå¤šä¸ªå®šä¹‰
```c
// âŒ é”™è¯¯ä»£ç 
// file1.c
int global_var = 10;

// file2.c  
int global_var = 20;  // é‡å¤å®šä¹‰
```

```c
// âœ… æ­£ç¡®ä»£ç 
// file1.c
int global_var = 10;  // å®šä¹‰

// file2.c
extern int global_var;  // å£°æ˜ï¼Œä¸æ˜¯å®šä¹‰
```
**é”™è¯¯ä¿¡æ¯**ï¼š`multiple definition of 'global_var'`

**è§£å†³æ–¹æ¡ˆ**ï¼šå…¨å±€å˜é‡åªèƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰ã€‚

### é”™è¯¯3ï¼šå¿˜è®°é“¾æ¥åº“
```c
// âŒ é”™è¯¯ä»£ç 
#include <math.h>
int main() {
    double x = sqrt(4.0);
    return 0;
}

// ç¼–è¯‘ï¼šgcc program.c -o program
```

```bash
# âœ… æ­£ç¡®ç¼–è¯‘
gcc program.c -o program -lm  # é“¾æ¥æ•°å­¦åº“
```
**é”™è¯¯ä¿¡æ¯**ï¼š`undefined reference to 'sqrt'`

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨æ•°å­¦å‡½æ•°æ—¶éœ€è¦é“¾æ¥æ•°å­¦åº“ `-lm`ã€‚

---

## 3. è¿è¡Œæ—¶é”™è¯¯

### é”™è¯¯1ï¼šé™¤ä»¥é›¶
```c
// âŒ å±é™©ä»£ç 
int divide(int a, int b) {
    return a / b;  // å¦‚æœb=0ä¼šå´©æºƒ
}
```

```c
// âœ… å®‰å…¨ä»£ç 
int divide(int a, int b) {
    if (b == 0) {
        printf("é”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸ºé›¶\n");
        return 0;  // æˆ–æŠ›å‡ºé”™è¯¯
    }
    return a / b;
}
```
**ç—‡çŠ¶**ï¼šç¨‹åºå´©æºƒï¼Œ`Floating point exception`

**è§£å†³æ–¹æ¡ˆ**ï¼šé™¤æ³•å‰æ£€æŸ¥é™¤æ•°æ˜¯å¦ä¸ºé›¶ã€‚

### é”™è¯¯2ï¼šæ•°ç»„è¶Šç•Œè®¿é—®
```c
// âŒ å±é™©ä»£ç 
int arr[5] = {1, 2, 3, 4, 5};
int value = arr[10];  // è¶Šç•Œè®¿é—®
```

```c
// âœ… å®‰å…¨ä»£ç 
#define ARRAY_SIZE 5
int arr[ARRAY_SIZE] = {1, 2, 3, 4, 5};

int get_element(int index) {
    if (index >= 0 && index < ARRAY_SIZE) {
        return arr[index];
    } else {
        printf("é”™è¯¯ï¼šæ•°ç»„ç´¢å¼•è¶Šç•Œ\n");
        return -1;  // æˆ–å¤„ç†é”™è¯¯
    }
}
```
**ç—‡çŠ¶**ï¼šä¸ç¡®å®šè¡Œä¸ºï¼Œå¯èƒ½å´©æºƒæˆ–æ•°æ®æŸå

**è§£å†³æ–¹æ¡ˆ**ï¼šå§‹ç»ˆæ£€æŸ¥æ•°ç»„ç´¢å¼•ã€‚

### é”™è¯¯3ï¼šæ•´æ•°æº¢å‡º
```c
// âŒ å±é™©ä»£ç 
int a = 2000000000;
int b = 2000000000;
int sum = a + b;  // æº¢å‡ºï¼
```

```c
// âœ… å®‰å…¨ä»£ç 
#include <limits.h>
#include <stdint.h>

int32_t safe_add(int32_t a, int32_t b) {
    if ((b > 0 && a > INT32_MAX - b) ||
        (b < 0 && a < INT32_MIN - b)) {
        printf("è­¦å‘Šï¼šæ•´æ•°æº¢å‡º\n");
        return 0;
    }
    return a + b;
}
```
**ç—‡çŠ¶**ï¼šç»“æœé”™è¯¯ä½†ä¸å´©æºƒ

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨æº¢å‡ºæ£€æŸ¥æˆ–æ›´å¤§çš„æ•°æ®ç±»å‹ã€‚

---

## 4. é€»è¾‘é”™è¯¯

### é”™è¯¯1ï¼šè¯¯ç”¨ = å’Œ ==
```c
// âŒ å¸¸è§é”™è¯¯
if (x = 5) {  // è¿™æ˜¯èµ‹å€¼ï¼Œä¸æ˜¯æ¯”è¾ƒ
    printf("xç­‰äº5\n");
}
```

```c
// âœ… æ­£ç¡®ä»£ç 
if (x == 5) {  // è¿™æ‰æ˜¯æ¯”è¾ƒ
    printf("xç­‰äº5\n");
}
```
**ç—‡çŠ¶**ï¼šæ¡ä»¶æ€»æ˜¯ä¸ºçœŸ

**æŠ€å·§**ï¼šå¯ä»¥æŠŠå¸¸é‡æ”¾å·¦è¾¹ `if (5 == x)` é˜²æ­¢è¯¯å†™

### é”™è¯¯2ï¼šswitchå¿˜è®°break
```c
// âŒ é”™è¯¯ä»£ç 
switch (choice) {
    case 1:
        printf("é€‰é¡¹1\n");
    case 2:  // æ²¡æœ‰breakï¼Œä¼šç»§ç»­æ‰§è¡Œ
        printf("é€‰é¡¹2\n");
        break;
}
```

```c
// âœ… æ­£ç¡®ä»£ç 
switch (choice) {
    case 1:
        printf("é€‰é¡¹1\n");
        break;  // è®°ä½break
    case 2:
        printf("é€‰é¡¹2\n");
        break;
}
```
**ç—‡çŠ¶**ï¼šå¤šä¸ªcaseä¼šè¢«æ‰§è¡Œ

**è§£å†³æ–¹æ¡ˆ**ï¼šæ³¨æ„æ¯ä¸ªcaseåæ˜¯å¦éœ€è¦breakã€‚

### é”™è¯¯3ï¼šæµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜
```c
// âŒ é”™è¯¯æ¯”è¾ƒ
float a = 0.1;
float b = 0.2;
float c = 0.3;

if (a + b == c) {  // å¯èƒ½ä¸ºfalseï¼
    printf("ç›¸ç­‰\n");
}
```

```c
// âœ… æ­£ç¡®æ¯”è¾ƒ
#include <math.h>
#define EPSILON 0.000001

if (fabs((a + b) - c) < EPSILON) {
    printf("åœ¨è¯¯å·®èŒƒå›´å†…ç›¸ç­‰\n");
}
```
**ç—‡çŠ¶**ï¼šæµ®ç‚¹æ•°æ¯”è¾ƒç»“æœä¸ç¬¦åˆé¢„æœŸ

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨è¯¯å·®èŒƒå›´æ¯”è¾ƒï¼Œè€Œä¸æ˜¯ç›´æ¥ç›¸ç­‰ã€‚

---

## 5. å†…å­˜ç›¸å…³é”™è¯¯

### é”™è¯¯1ï¼šä½¿ç”¨æœªåˆå§‹åŒ–çš„å˜é‡
```c
// âŒ å±é™©ä»£ç 
int x;
printf("%d\n", x);  // xçš„å€¼æ˜¯æœªå®šä¹‰çš„
```

```c
// âœ… å®‰å…¨ä»£ç 
int x = 0;  // æ€»æ˜¯åˆå§‹åŒ–å˜é‡
printf("%d\n", x);
```
**ç—‡çŠ¶**ï¼šç¨‹åºè¡Œä¸ºä¸å¯é¢„æµ‹

**æœ€ä½³å®è·µ**ï¼šå£°æ˜å˜é‡æ—¶ç«‹å³åˆå§‹åŒ–ã€‚

### é”™è¯¯2ï¼šç¼“å†²åŒºæº¢å‡º
```c
// âŒ å±é™©ä»£ç 
char buffer[10];
scanf("%s", buffer);  // ç”¨æˆ·è¾“å…¥å¯èƒ½è¶…è¿‡10å­—ç¬¦
```

```c
// âœ… å®‰å…¨ä»£ç 
char buffer[10];
fgets(buffer, sizeof(buffer), stdin);  // é™åˆ¶è¾“å…¥é•¿åº¦
```
**ç—‡çŠ¶**ï¼šå†…å­˜æŸåï¼Œå®‰å…¨æ¼æ´

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨å®‰å…¨çš„è¾“å…¥å‡½æ•°ï¼Œå¦‚ `fgets()`ã€‚

### é”™è¯¯3ï¼šå†…å­˜æ³„æ¼
```c
// âŒ å†…å­˜æ³„æ¼
void process_data() {
    int *data = (int*)malloc(100 * sizeof(int));
    // ä½¿ç”¨data...
    // å¿˜è®° free(data);
}
```

```c
// âœ… æ­£ç¡®ä»£ç 
void process_data() {
    int *data = NULL;
    
    data = (int*)malloc(100 * sizeof(int));
    if (data == NULL) {
        printf("å†…å­˜åˆ†é…å¤±è´¥\n");
        return;
    }
    
    // ä½¿ç”¨data...
    
    free(data);  // é‡Šæ”¾å†…å­˜
    data = NULL; // é¿å…é‡æŒ‡é’ˆ
}
```
**ç—‡çŠ¶**ï¼šç¨‹åºè¿è¡Œæ—¶é—´è¶Šé•¿ï¼Œå ç”¨å†…å­˜è¶Šå¤š

**è§£å†³æ–¹æ¡ˆ**ï¼šæ¯ä¸ª `malloc()` å¿…é¡»å¯¹åº”ä¸€ä¸ª `free()`ã€‚

### é”™è¯¯4ï¼šä½¿ç”¨å·²é‡Šæ”¾çš„å†…å­˜
```c
// âŒ å±é™©ä»£ç 
int *ptr = (int*)malloc(sizeof(int));
*ptr = 10;
free(ptr);
*ptr = 20;  // ä½¿ç”¨å·²é‡Šæ”¾çš„å†…å­˜
```

```c
// âœ… å®‰å…¨ä»£ç 
int *ptr = (int*)malloc(sizeof(int));
if (ptr != NULL) {
    *ptr = 10;
    free(ptr);
    ptr = NULL;  // è®¾ç½®ä¸ºNULLé˜²æ­¢è¯¯ç”¨
}
```
**ç—‡çŠ¶**ï¼šç¨‹åºå´©æºƒæˆ–æ•°æ®æŸå

**è§£å†³æ–¹æ¡ˆ**ï¼šé‡Šæ”¾å†…å­˜åå°†æŒ‡é’ˆè®¾ä¸ºNULLã€‚

### é”™è¯¯5ï¼šé‡å¤é‡Šæ”¾
```c
// âŒ å±é™©ä»£ç 
int *ptr = (int*)malloc(sizeof(int));
free(ptr);
free(ptr);  // é‡å¤é‡Šæ”¾
```

```c
// âœ… æ­£ç¡®ä»£ç 
int *ptr = (int*)malloc(sizeof(int));
if (ptr != NULL) {
    free(ptr);
    ptr = NULL;  // é‡Šæ”¾åç«‹å³è®¾ä¸ºNULL
}
// å†æ¬¡é‡Šæ”¾ä¼šæ£€æŸ¥
if (ptr != NULL) {
    free(ptr);
}
```
**ç—‡çŠ¶**ï¼šç¨‹åºå´©æºƒ

**è§£å†³æ–¹æ¡ˆ**ï¼šé‡Šæ”¾åå°†æŒ‡é’ˆè®¾ä¸ºNULLã€‚

---

## 6. æŒ‡é’ˆç›¸å…³é”™è¯¯

### é”™è¯¯1ï¼šé‡æŒ‡é’ˆ
```c
// âŒ å±é™©ä»£ç 
int *ptr;  // æœªåˆå§‹åŒ–
*ptr = 10; // æŒ‡å‘éšæœºå†…å­˜åœ°å€
```

```c
// âœ… å®‰å…¨ä»£ç 
int *ptr = NULL;  // æ€»æ˜¯åˆå§‹åŒ–ä¸ºNULL
int value = 10;
ptr = &value;     // æŒ‡å‘æœ‰æ•ˆåœ°å€
*ptr = 20;
```
**ç—‡çŠ¶**ï¼šéšæœºå´©æºƒ

**è§£å†³æ–¹æ¡ˆ**ï¼šæŒ‡é’ˆå£°æ˜æ—¶åˆå§‹åŒ–ä¸ºNULLã€‚

### é”™è¯¯2ï¼šè¿”å›å±€éƒ¨å˜é‡çš„åœ°å€
```c
// âŒ å±é™©ä»£ç 
int* get_number() {
    int num = 42;
    return &num;  // è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€
}
```

```c
// âœ… æ­£ç¡®ä»£ç 
// æ–¹æ¡ˆ1ï¼šè¿”å›é™æ€å˜é‡
int* get_number() {
    static int num = 42;  // é™æ€å˜é‡
    return &num;
}

// æ–¹æ¡ˆ2ï¼šåŠ¨æ€åˆ†é…
int* get_number() {
    int *num = (int*)malloc(sizeof(int));
    if (num != NULL) {
        *num = 42;
    }
    return num;
}
```
**ç—‡çŠ¶**ï¼šè¿”å›åè®¿é—®ä¼šå¾—åˆ°åƒåœ¾æ•°æ®

**è§£å†³æ–¹æ¡ˆ**ï¼šä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€ã€‚

### é”™è¯¯3ï¼šæŒ‡é’ˆç±»å‹ä¸åŒ¹é…
```c
// âŒ é”™è¯¯ä»£ç 
float f = 3.14;
int *ptr = &f;  // ç±»å‹ä¸åŒ¹é…
```

```c
// âœ… æ­£ç¡®ä»£ç 
float f = 3.14;
float *ptr = &f;  // ç±»å‹åŒ¹é…
```
**é”™è¯¯ä¿¡æ¯**ï¼š`warning: assignment from incompatible pointer type`

**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿æŒ‡é’ˆç±»å‹ä¸æŒ‡å‘çš„æ•°æ®ç±»å‹åŒ¹é…ã€‚

### é”™è¯¯4ï¼šæŒ‡é’ˆè¿ç®—é”™è¯¯
```c
// âŒ å®¹æ˜“å‡ºé”™çš„ä»£ç 
int arr[10];
int *ptr = arr;
ptr += 10;  // æŒ‡å‘æ•°ç»„æœ«å°¾ä¹‹å
*ptr = 100; // è¶Šç•Œå†™å…¥
```

```c
// âœ… å®‰å…¨ä»£ç 
int arr[10];
int *ptr = arr;
int *end = arr + 10;  // æŒ‡å‘æœ«å°¾ï¼ˆä¸å¯è®¿é—®ï¼‰

for (ptr = arr; ptr < end; ptr++) {
    *ptr = 0;  // å®‰å…¨è®¿é—®
}
```
**ç—‡çŠ¶**ï¼šå†…å­˜æŸå

**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿æŒ‡é’ˆè¿ç®—åä»åœ¨æœ‰æ•ˆèŒƒå›´å†…ã€‚

---

## 7. æ•°ç»„å’Œå­—ç¬¦ä¸²é”™è¯¯

### é”™è¯¯1ï¼šå¿˜è®°å­—ç¬¦ä¸²çš„'\0'
```c
// âŒ é”™è¯¯ä»£ç 
char str[5];
str[0] = 'H';
str[1] = 'e';
str[2] = 'l';
str[3] = 'l';
str[4] = 'o';  // æ²¡æœ‰ç©ºé—´æ”¾'\0'
```

```c
// âœ… æ­£ç¡®ä»£ç 
char str[6];  // ä¸º'\0'é¢„ç•™ç©ºé—´
str[0] = 'H';
str[1] = 'e';
str[2] = 'l';
str[3] = 'l';
str[4] = 'o';
str[5] = '\0';  // å­—ç¬¦ä¸²ç»ˆæ­¢ç¬¦
```
**ç—‡çŠ¶**ï¼šå­—ç¬¦ä¸²å‡½æ•°å‡ºé”™

**è§£å†³æ–¹æ¡ˆ**ï¼šä¸ºå­—ç¬¦ä¸²åˆ†é…ç©ºé—´æ—¶é¢„ç•™ä¸€ä¸ªå­—ç¬¦ç»™'\0'ã€‚

### é”™è¯¯2ï¼šä½¿ç”¨strcpyä¸å®‰å…¨
```c
// âŒ å±é™©ä»£ç 
char dest[10];
char src[20] = "è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²";
strcpy(dest, src);  // å¯èƒ½æº¢å‡º
```

```c
// âœ… å®‰å…¨ä»£ç 
char dest[10];
char src[20] = "è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²";
strncpy(dest, src, sizeof(dest) - 1);  // é™åˆ¶é•¿åº¦
dest[sizeof(dest) - 1] = '\0';        // ç¡®ä¿ç»ˆæ­¢
```
**ç—‡çŠ¶**ï¼šç¼“å†²åŒºæº¢å‡º

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `strncpy()` å¹¶æ‰‹åŠ¨æ·»åŠ '\0'ã€‚

### é”™è¯¯3ï¼šæ•°ç»„ä½œä¸ºå‚æ•°çš„å¤§å°ä¿¡æ¯ä¸¢å¤±
```c
// âŒ é—®é¢˜ä»£ç 
void print_array(int arr[]) {
    int size = sizeof(arr) / sizeof(arr[0]);  // é”™è¯¯ï¼
    // sizeof(arr) è¿”å›æŒ‡é’ˆå¤§å°ï¼Œä¸æ˜¯æ•°ç»„å¤§å°
}
```

```c
// âœ… æ­£ç¡®ä»£ç 
void print_array(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        printf("%d ", arr[i]);
    }
}

// è°ƒç”¨æ—¶
int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    print_array(arr, 5);  // æ˜¾å¼ä¼ é€’å¤§å°
}
```
**ç—‡çŠ¶**ï¼šæ•°ç»„å¤§å°è®¡ç®—é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼šæ•°ç»„ä½œä¸ºå‚æ•°æ—¶éœ€è¦é¢å¤–ä¼ é€’å¤§å°ä¿¡æ¯ã€‚

### é”™è¯¯4ï¼šgets()çš„å±é™©ä½¿ç”¨
```c
// âŒ æ°¸è¿œä¸è¦ä½¿ç”¨gets()
char buffer[10];
gets(buffer);  // å¯èƒ½å¯¼è‡´ç¼“å†²åŒºæº¢å‡º
```

```c
// âœ… ä½¿ç”¨fgets()
char buffer[10];
fgets(buffer, sizeof(buffer), stdin);
```
**ç—‡çŠ¶**ï¼šå®‰å…¨æ¼æ´

**è§£å†³æ–¹æ¡ˆ**ï¼šæ°¸è¿œä¸è¦ä½¿ç”¨ `gets()`ï¼Œç”¨ `fgets()` æ›¿ä»£ã€‚

---

## 8. é¢„å¤„ç†å™¨é”™è¯¯

### é”™è¯¯1ï¼šå®å®šä¹‰ç¼ºå°‘æ‹¬å·
```c
// âŒ é—®é¢˜ä»£ç 
#define SQUARE(x) x * x
int result = SQUARE(3 + 2);  // å±•å¼€ä¸º 3 + 2 * 3 + 2 = 11
```

```c
// âœ… æ­£ç¡®ä»£ç 
#define SQUARE(x) ((x) * (x))
int result = SQUARE(3 + 2);  // å±•å¼€ä¸º ((3 + 2) * (3 + 2)) = 25
```
**ç—‡çŠ¶**ï¼šå®å±•å¼€ç»“æœä¸ç¬¦åˆé¢„æœŸ

**è§£å†³æ–¹æ¡ˆ**ï¼šå®å®šä¹‰ä¸­çš„å‚æ•°å’Œæ•´ä¸ªè¡¨è¾¾å¼éƒ½è¦åŠ æ‹¬å·ã€‚

### é”™è¯¯2ï¼šå¿˜è®°å¤´æ–‡ä»¶ä¿æŠ¤
```c
// âŒ å¯èƒ½å¯¼è‡´é‡å¤å®šä¹‰
// myheader.h
struct Point {
    int x;
    int y;
};
```

```c
// âœ… æ­£ç¡®ä»£ç 
// myheader.h
#ifndef MYHEADER_H
#define MYHEADER_H

struct Point {
    int x;
    int y;
};

#endif
```
**ç—‡çŠ¶**ï¼šé‡å¤å®šä¹‰é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼šæ‰€æœ‰å¤´æ–‡ä»¶éƒ½è¦æœ‰å¤´æ–‡ä»¶ä¿æŠ¤ã€‚

### é”™è¯¯3ï¼šå®çš„å¤šè¯­å¥é—®é¢˜
```c
// âŒ é—®é¢˜ä»£ç 
#define SWAP(a, b) temp = a; a = b; b = temp;
if (x > y)
    SWAP(x, y);  // å±•å¼€ååªæœ‰ç¬¬ä¸€æ¡è¯­å¥åœ¨ifä¸­
```

```c
// âœ… æ­£ç¡®ä»£ç 
#define SWAP(a, b) do { \
    typeof(a) temp = a; \
    a = b; \
    b = temp; \
} while(0)

if (x > y)
    SWAP(x, y);  // æ•´ä¸ªå—éƒ½åœ¨ifä¸­
```
**ç—‡çŠ¶**ï¼šåªæœ‰å®çš„ç¬¬ä¸€æ¡è¯­å¥å—æ¡ä»¶å½±å“

**è§£å†³æ–¹æ¡ˆ**ï¼šå¤šè¯­å¥å®ç”¨ `do { ... } while(0)` åŒ…è£¹ã€‚

### é”™è¯¯4ï¼š#defineä¸constæ··æ·†
```c
// âŒ ä¸æ¨èçš„å®å®šä¹‰å¸¸é‡
#define PI 3.14159

// âŒ å®å®šä¹‰çš„"å‡½æ•°"
#define MAX(a, b) ((a) > (b) ? (a) : (b))
```

```c
// âœ… æ¨èä½¿ç”¨constå’Œinlineå‡½æ•°
const double PI = 3.14159;

static inline int max(int a, int b) {
    return a > b ? a : b;
}
```
**ä¼˜ç‚¹**ï¼šç±»å‹å®‰å…¨ï¼Œä¾¿äºè°ƒè¯•

**å»ºè®®**ï¼šä¼˜å…ˆä½¿ç”¨constå’Œinlineå‡½æ•°ï¼Œè€Œä¸æ˜¯å®ã€‚

---

## 9. æœ€ä½³å®è·µå»ºè®®

### 1. ç¼–è¯‘å™¨è­¦å‘Šè®¾ç½®
```bash
# æ€»æ˜¯å¯ç”¨æ‰€æœ‰è­¦å‘Š
gcc -Wall -Wextra -Werror program.c -o program

# é™„åŠ å®‰å…¨è­¦å‘Š
gcc -Wall -Wextra -Wpedantic -Werror program.c -o program
```

### 2. ä½¿ç”¨é™æ€åˆ†æå·¥å…·
```bash
# ä½¿ç”¨splint
splint program.c

# ä½¿ç”¨cppcheck
cppcheck --enable=all program.c

# ä½¿ç”¨clangåˆ†æå™¨
clang --analyze program.c
```

### 3. ä»£ç æ ¼å¼åŒ–å·¥å…·
```bash
# ä½¿ç”¨clang-format
clang-format -i *.c *.h

# ä½¿ç”¨indent
indent -kr -i4 -nut program.c
```

### 4. è°ƒè¯•æŠ€å·§
```c
// ä½¿ç”¨æ–­è¨€
#include <assert.h>
void process(int *ptr) {
    assert(ptr != NULL);  // è°ƒè¯•æ—¶æ£€æŸ¥
    // ...
}

// ä½¿ç”¨è°ƒè¯•å®
#ifdef DEBUG
#define DBG_PRINT(fmt, ...) printf(fmt, ##__VA_ARGS__)
#else
#define DBG_PRINT(fmt, ...) 
#endif
```

### 5. é˜²å¾¡æ€§ç¼–ç¨‹
```c
// ç¤ºä¾‹ï¼šå®‰å…¨çš„å­—ç¬¦ä¸²å¤åˆ¶
char* safe_strcpy(char *dest, const char *src, size_t dest_size) {
    if (dest == NULL || src == NULL || dest_size == 0) {
        return NULL;
    }
    
    size_t i;
    for (i = 0; i < dest_size - 1 && src[i] != '\0'; i++) {
        dest[i] = src[i];
    }
    dest[i] = '\0';
    
    return dest;
}
```

### 6. é”™è¯¯å¤„ç†æ¨¡å¼
```c
// ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
typedef enum {
    ERROR_NONE = 0,
    ERROR_NULL_POINTER,
    ERROR_OUT_OF_MEMORY,
    ERROR_INVALID_INPUT,
    ERROR_FILE_NOT_FOUND
} ErrorCode;

ErrorCode process_file(const char *filename) {
    if (filename == NULL) {
        return ERROR_NULL_POINTER;
    }
    
    FILE *file = fopen(filename, "r");
    if (file == NULL) {
        return ERROR_FILE_NOT_FOUND;
    }
    
    // å¤„ç†æ–‡ä»¶...
    
    fclose(file);
    return ERROR_NONE;
}
```

### 7. å†…å­˜ç®¡ç†æŠ€å·§
```c
// ä½¿ç”¨å†…å­˜åˆ†é…åŒ…è£…å‡½æ•°
void* xmalloc(size_t size) {
    void *ptr = malloc(size);
    if (ptr == NULL) {
        fprintf(stderr, "å†…å­˜åˆ†é…å¤±è´¥: %zu bytes\n", size);
        exit(EXIT_FAILURE);
    }
    return ptr;
}

void* xcalloc(size_t num, size_t size) {
    void *ptr = calloc(num, size);
    if (ptr == NULL) {
        fprintf(stderr, "å†…å­˜åˆ†é…å¤±è´¥: %zu * %zu bytes\n", num, size);
        exit(EXIT_FAILURE);
    }
    return ptr;
}
```

## ğŸ“Š é”™è¯¯æ£€æŸ¥æ¸…å•

### ç¼–è¯‘å‰æ£€æŸ¥
- [ ] æ‰€æœ‰è¯­å¥ä»¥åˆ†å·ç»“æŸ
- [ ] æ‰€æœ‰å‡½æ•°æœ‰æ­£ç¡®çš„è¿”å›å€¼
- [ ] æ‰€æœ‰å˜é‡å·²å£°æ˜
- [ ] å¤´æ–‡ä»¶å·²åŒ…å«

### è¿è¡Œæ—¶æ£€æŸ¥  
- [ ] æ•°ç»„ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†…
- [ ] æŒ‡é’ˆä¸ä¸ºNULL
- [ ] é™¤æ•°ä¸ºé›¶æ£€æŸ¥
- [ ] æ–‡ä»¶æ‰“å¼€æˆåŠŸæ£€æŸ¥

### å†…å­˜æ£€æŸ¥
- [ ] mallocåæ£€æŸ¥è¿”å›å€¼
- [ ] æ¯ä¸ªmallocéƒ½æœ‰å¯¹åº”çš„free
- [ ] é‡Šæ”¾åå°†æŒ‡é’ˆè®¾ä¸ºNULL
- [ ] ä¸è®¿é—®å·²é‡Šæ”¾çš„å†…å­˜

### å®‰å…¨æ€§æ£€æŸ¥
- [ ] è¾“å…¥é•¿åº¦é™åˆ¶
- [ ] ä¸ä½¿ç”¨ä¸å®‰å…¨çš„å‡½æ•°ï¼ˆgets, strcpyï¼‰
- [ ] æ•æ„Ÿä¿¡æ¯å¤„ç†
- [ ] é”™è¯¯ä¿¡æ¯ä¸æ³„éœ²ç»†èŠ‚

## ğŸ¯ è°ƒè¯•æŠ€å·§æ€»ç»“

### 1. ä½¿ç”¨GDB
```bash
# ç¼–è¯‘æ—¶åŒ…å«è°ƒè¯•ä¿¡æ¯
gcc -g program.c -o program

# å¯åŠ¨GDB
gdb ./program

# å¸¸ç”¨å‘½ä»¤
break main      # è®¾ç½®æ–­ç‚¹
run            # è¿è¡Œç¨‹åº
next           # å•æ­¥æ‰§è¡Œ
print variable # æŸ¥çœ‹å˜é‡
backtrace      # æŸ¥çœ‹è°ƒç”¨æ ˆ
```

### 2. ä½¿ç”¨printfè°ƒè¯•
```c
// æ¡ä»¶è°ƒè¯•è¾“å‡º
#ifdef DEBUG
#define DEBUG_PRINT(fmt, ...) \
    fprintf(stderr, "DEBUG %s:%d: " fmt, \
            __FILE__, __LINE__, ##__VA_ARGS__)
#else
#define DEBUG_PRINT(fmt, ...)
#endif
```

### 3. ä½¿ç”¨Valgrindæ£€æŸ¥å†…å­˜
```bash
# æ£€æŸ¥å†…å­˜æ³„æ¼
valgrind --leak-check=full ./program

# æ£€æŸ¥æœªåˆå§‹åŒ–å†…å­˜
valgrind --track-origins=yes ./program
```

---

## ğŸ†˜ é‡åˆ°é—®é¢˜æ€ä¹ˆåŠ

### æ­¥éª¤1ï¼šé˜…è¯»é”™è¯¯ä¿¡æ¯
```bash
# é”™è¯¯ä¿¡æ¯é€šå¸¸åŒ…å«ï¼š
# 1. é”™è¯¯ç±»å‹ï¼ˆerror/warningï¼‰
# 2. é”™è¯¯ä½ç½®ï¼ˆæ–‡ä»¶:è¡Œå·ï¼‰
# 3. é”™è¯¯æè¿°
# 4. æœ‰æ—¶è¿˜æœ‰å»ºè®®
```

### æ­¥éª¤2ï¼šç®€åŒ–é—®é¢˜
```c
// åˆ›å»ºæœ€å°å¤ç°ä»£ç 
// 1. ç§»é™¤æ— å…³ä»£ç 
// 2. ç®€åŒ–æ•°æ®ç»“æ„
// 3. ä½¿ç”¨ç¡¬ç¼–ç å€¼
// 4. ç¡®ä¿å¯ä»¥ç‹¬ç«‹ç¼–è¯‘è¿è¡Œ
```

### æ­¥éª¤3ï¼šæœç´¢è§£å†³æ–¹æ¡ˆ
```
æœç´¢å…³é”®è¯ï¼š
1. å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
2. é”™è¯¯ç¼–å·
3. å‡½æ•°å + é—®é¢˜æè¿°
4. ä½¿ç”¨è‹±æ–‡æœç´¢é€šå¸¸æ›´å¤šç»“æœ
```

### æ­¥éª¤4ï¼šæé—®çš„è‰ºæœ¯
```
æé—®æ—¶æä¾›ï¼š
1. å®Œæ•´é”™è¯¯ä¿¡æ¯
2. ç›¸å…³ä»£ç ç‰‡æ®µ
3. ä½ å·²ç»å°è¯•çš„æ–¹æ³•
4. ä½ çš„ç¯å¢ƒä¿¡æ¯
5. æœŸæœ›çš„ç»“æœå’Œå®é™…ç»“æœ
```

---

**è®°ä½ï¼š** çŠ¯é”™è¯¯æ˜¯å­¦ä¹ è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚æ¯ä¸ªæœ‰ç»éªŒçš„Cç¨‹åºå‘˜éƒ½æ›¾é‡åˆ°è¿‡è¿™äº›é”™è¯¯ã€‚å…³é”®æ˜¯å­¦ä¼šå¦‚ä½•å¿«é€Ÿè¯†åˆ«å’Œè§£å†³å®ƒä»¬ï¼
